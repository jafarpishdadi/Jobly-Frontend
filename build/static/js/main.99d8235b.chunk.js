(this["webpackJsonpreact-jobly"]=this["webpackJsonpreact-jobly"]||[]).push([[0],{152:function(e,t,n){},155:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},186:function(e,t){},188:function(e,t){},202:function(e,t){},204:function(e,t){},232:function(e,t){},234:function(e,t){},235:function(e,t){},240:function(e,t){},242:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},293:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(141),c=n.n(s),o=(n(152),n(153),n(147)),i=n(2),l=n.n(i),u=n(5),j=n(6),b=n(9);var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,a=Object(r.useState)(n),s=Object(j.a)(a,2),c=s[0],o=s[1];return Object(r.useEffect)((function(){console.debug("hooks useLocalStorage useEffect","item=",c),null===c?localStorage.removeItem(e):localStorage.setItem(e,c)}),[e,c]),[c,o]},p=a.a.createContext(),d=(n(155),n(0));var f=function(e){var t=e.logout,n=Object(r.useContext)(p).currentUser;return console.debug("Navigation","currentUser=",n),Object(d.jsxs)("nav",{className:"Navigation navbar navbar-expand-md",children:[Object(d.jsx)(b.b,{className:"navbar-brand",to:"/",children:"Jobly"}),n?Object(d.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(d.jsx)("li",{className:"nav-item mr-4",children:Object(d.jsx)(b.c,{className:"nav-link",to:"/companies",children:"Companies"})}),Object(d.jsx)("li",{className:"nav-item mr-4",children:Object(d.jsx)(b.c,{className:"nav-link",to:"/jobs",children:"Jobs"})}),Object(d.jsx)("li",{className:"nav-item mr-4",children:Object(d.jsx)(b.c,{className:"nav-link",to:"/profile",children:"Profile"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(b.b,{className:"nav-link",to:"/",onClick:t,children:"Log out"})})]}):Object(d.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(d.jsx)("li",{className:"nav-item mr-4",children:Object(d.jsx)(b.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(d.jsx)("li",{className:"nav-item mr-4",children:Object(d.jsx)(b.c,{className:"nav-link",to:"/signup",children:"Sign Up"})})]})]})},h=n(7);n(161);var O=function(){var e=Object(r.useContext)(p).currentUser;return console.debug("Homepage","currentUser=",e),Object(d.jsx)("div",{className:"Homepage",children:Object(d.jsxs)("div",{className:"container text-center",children:[Object(d.jsx)("h1",{className:"mb-4 font-weight-bold",children:"Jobly"}),Object(d.jsx)("p",{className:"lead",children:"All the jobs in one, convenient place."}),e?Object(d.jsxs)("h2",{children:["Welcome Back, ",e.firstName||e.username,"!"]}):Object(d.jsxs)("p",{children:[Object(d.jsx)(b.b,{className:"btn btn-primary font-weight-bold mr-3",to:"/login",children:"Log in"}),Object(d.jsx)(b.b,{className:"btn btn-primary font-weight-bold",to:"/signup",children:"Sign up"})]})]})})};n(162);var x=function(e){var t=e.searchFor;console.debug("SearchForm","searchFor=",typeof t);var n=Object(r.useState)(""),a=Object(j.a)(n,2),s=a[0],c=a[1];return Object(d.jsx)("div",{className:"SearchForm mb-4",children:Object(d.jsxs)("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),t(s.trim()||void 0),c(s.trim())},children:[Object(d.jsx)("input",{className:"form-control form-control-lg flex-grow-1",name:"searchTerm",placeholder:"Enter search term..",value:s,onChange:function(e){c(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary",children:"Submit"})]})})},v=n(143),g=n(144),N=n(145),y=n.n(N),w="https://khadnot-jobly.herokuapp.com/",k=function(){function e(){Object(v.a)(this,e)}return Object(g.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(l.a.mark((function t(n){var r,a,s,c,o,i,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},a=u.length>2&&void 0!==u[2]?u[2]:"get",console.debug("API Call:",n,r,a),s="".concat(w,"/").concat(n),c={Authorization:"Bearer ".concat(e.token)},o="get"===a?r:{},t.prev=6,t.next=9,y()({url:s,method:a,data:r,params:o,headers:c});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.message),i=t.t0.response.data.error.message,Array.isArray(i)?i:[i];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanies",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies",{name:t});case 2:return n=e.sent,e.abrupt("return",n.companies);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.company);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getJobs",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("jobs",{title:t});case 2:return n=e.sent,e.abrupt("return",n.jobs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyToJob",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t,"/jobs/").concat(n),{},"post");case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveProfile",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();n(180);var C=function(e){var t=e.name,n=e.description,r=e.logoUrl,a=e.handle;return console.debug("CompanyCard",r),Object(d.jsx)(b.b,{className:"CompanyCard card",to:"/companies/".concat(a),children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("h6",{className:"card-title",children:[t,r&&Object(d.jsx)("img",{src:r,alt:t,className:"float-right ml-5"})]}),Object(d.jsx)("p",{children:Object(d.jsx)("small",{children:n})})]})})};n(181);var S=function(){return Object(d.jsx)("div",{className:"LoadingSpinner",children:"Loading ..."})};var U=function(){console.debug("CompanyList");var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1];function s(e){return c.apply(this,arguments)}function c(){return(c=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getCompanies(t);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.debug("CompanyList useEffect getCompaniesOnMount"),s()}),[]),n?Object(d.jsxs)("div",{className:"CompanyList col-md-8 offset-md-2",children:[Object(d.jsx)(x,{searchFor:s}),n.length?Object(d.jsx)("div",{className:"CompanyList-list",children:n.map((function(e){return Object(d.jsx)(C,{handle:e.handle,name:e.name,description:e.description,logoUrl:e.logoUrl},e.handle)}))}):Object(d.jsx)("p",{className:"lead",children:"Sorry, no results were found!"})]}):Object(d.jsx)(S,{})};n(182);function J(e){for(var t=[],n=e.toString(),r=n.length-1;r>=0;r--)t.push(n[r]),r>0&&r%3===0&&t.push(",");return t.reverse().join("")}var E=function(e){var t=e.id,n=e.title,s=e.salary,c=e.equity,o=e.companyName;console.debug("JobCard");var i=Object(r.useContext)(p),b=i.hasAppliedToJob,m=i.applyToJob,f=Object(r.useState)(),h=Object(j.a)(f,2),O=h[0],x=h[1];function v(){return(v=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b(t)){e.next=2;break}return e.abrupt("return");case 2:m(t),x(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){console.debug("JobCard useEffect updateAppliedStatus","id=",t),x(b(t))}),[t,b]),Object(d.jsxs)("div",{className:"JobCard card",children:[" ",O,Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h6",{className:"card-title",children:n}),Object(d.jsx)("p",{children:o}),s&&Object(d.jsx)("div",{children:Object(d.jsxs)("small",{children:["Salary: ",J(s)]})}),void 0!==c&&Object(d.jsx)("div",{children:Object(d.jsxs)("small",{children:["Equity: ",c]})}),Object(d.jsx)("button",{className:"btn btn-danger font-weight-bold text-uppercase float-right",onClick:function(e){return v.apply(this,arguments)},disabled:O,children:O?"Applied":"Apply"})]})]})};var L=function(e){var t=e.jobs;return e.apply,console.debug("JobCardList","jobs=",t),Object(d.jsx)("div",{className:"JobCardList",children:t.map((function(e){return Object(d.jsx)(E,{id:e.id,title:e.title,salary:e.salary,equity:e.equity,companyName:e.companyName},e.id)}))})};var A=function(){console.debug("JobList");var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1];function s(e){return c.apply(this,arguments)}function c(){return(c=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getJobs(t);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.debug("JobList useEffect getAllJobsOnMount"),s()}),[]),n?Object(d.jsxs)("div",{className:"JobList col-md-8 offset-md-2",children:[Object(d.jsx)(x,{searchFor:s}),n.length?Object(d.jsx)(L,{jobs:n}):Object(d.jsx)("p",{className:"lead",children:"Sorry, no results were found!"})]}):Object(d.jsx)(S,{})};var q=function(){var e=Object(h.h)().handle;console.debug("CompanyDetail","handle=",e);var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,k.getCompany(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),a?Object(d.jsxs)("div",{className:"CompanyDetail col-md-8 offset-md-2",children:[Object(d.jsx)("h4",{children:a.name}),Object(d.jsx)("p",{children:a.description}),Object(d.jsx)(L,{jobs:a.jobs})]}):Object(d.jsx)(S,{})},F=n(23),P=n(19);var D=function(e){var t=e.type,n=void 0===t?"danger":t,r=e.messages,a=void 0===r?[]:r;return console.debug("Alert","type=",n,"messages=",a),Object(d.jsx)("div",{className:"alert alert-".concat(n),role:"alert",children:a.map((function(e){return Object(d.jsx)("p",{className:"mb-0 small",children:e},e)}))})};var I=function(e){var t=e.login,n=Object(h.g)(),a=Object(r.useState)({username:"",password:""}),s=Object(j.a)(a,2),c=s[0],o=s[1],i=Object(r.useState)([]),b=Object(j.a)(i,2),m=b[0],p=b[1];function f(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(c);case 3:(a=e.sent).success?n.push("/companies"):p(a.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,r=t.value;o((function(e){return Object(P.a)(Object(P.a)({},e),{},Object(F.a)({},n,r))}))}return console.debug("LoginForm","login=",typeof t,"formData=",c,"formErrors",m),Object(d.jsx)("div",{className:"LoginForm",children:Object(d.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(d.jsx)("h3",{className:"mb-3",children:"Log In"}),Object(d.jsx)("div",{className:"card",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("form",{onSubmit:f,children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{name:"username",className:"form-control",value:c.username,onChange:x,autoComplete:"username",required:!0})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:x,autoComplete:"current-password",required:!0})]}),m.length?Object(d.jsx)(D,{type:"danger",messages:m}):null,Object(d.jsx)("button",{className:"btn btn-primary float-right",onSubmit:f,children:"Submit"})]})})})]})})};var T=function(){var e=Object(r.useContext)(p),t=e.currentUser,n=e.setCurrentUser,a=Object(r.useState)({firstName:t.firstName,lastName:t.lastName,email:t.email,username:t.username,password:""}),s=Object(j.a)(a,2),c=s[0],o=s[1],i=Object(r.useState)([]),b=Object(j.a)(i,2),m=b[0],f=b[1],h=Object(r.useState)(!1),O=Object(j.a)(h,2),x=O[0],v=O[1];function g(){return(g=Object(u.a)(l.a.mark((function e(t){var r,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={firstName:c.firstName,lastName:c.lastName,email:c.email,password:c.password},a=c.username,e.prev=3,e.next=6,k.saveProfile(a,r);case 6:s=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),f(e.t0),e.abrupt("return");case 14:o((function(e){return Object(P.a)(Object(P.a)({},e),{},{password:""})})),f([]),v(!0),n(s);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function N(e){var t=e.target,n=t.name,r=t.value;o((function(e){return Object(P.a)(Object(P.a)({},e),{},Object(F.a)({},n,r))})),f([])}return console.debug("ProfileForm","currentUser=",t,"formData=",c,"formErrors=",m,"saveConfirmed=",x),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4",children:[Object(d.jsx)("h3",{children:"Profile"}),Object(d.jsx)("div",{className:"card",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("p",{className:"form-control-plaintext",children:c.username})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"First Name"}),Object(d.jsx)("input",{name:"firstName",className:"form-control",value:c.firstName,onChange:N})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Last Name"}),Object(d.jsx)("input",{name:"lastName",className:"form-control",value:c.lastName,onChange:N})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{name:"email",className:"form-control",value:c.email,onChange:N})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Confirm password to make changes:"}),Object(d.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:N})]}),m.length?Object(d.jsx)(D,{type:"danger",messages:m}):null,x?Object(d.jsx)(D,{type:"success",messages:["Updated successfully."]}):null,Object(d.jsx)("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return g.apply(this,arguments)},children:"Save Changes"})]})})})]})};var B=function(e){var t=e.signup,n=Object(h.g)(),a=Object(r.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),s=Object(j.a)(a,2),c=s[0],o=s[1],i=Object(r.useState)([]),b=Object(j.a)(i,2),m=b[0],p=b[1];function f(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t(c);case 3:(a=e.sent).success?n.push("/companies"):p(a.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.target,n=t.name,r=t.value;o((function(e){return Object(P.a)(Object(P.a)({},e),{},Object(F.a)({},n,r))}))}return console.debug("SignupForm","signup=",typeof t,"formData=",c,"formErrors=",m),Object(d.jsx)("div",{className:"SignupForm",children:Object(d.jsxs)("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4",children:[Object(d.jsx)("h2",{className:"mb-3",children:"Sign Up"}),Object(d.jsx)("div",{className:"card",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("form",{onSubmit:f,children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{name:"username",className:"form-control",value:c.username,onChange:x})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",className:"form-control",value:c.password,onChange:x})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"First name"}),Object(d.jsx)("input",{name:"firstName",className:"form-control",value:c.firstName,onChange:x})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Last name"}),Object(d.jsx)("input",{name:"lastName",className:"form-control",value:c.lastName,onChange:x})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",className:"form-control",value:c.email,onChange:x})]}),m.length?Object(d.jsx)(D,{type:"danger",messages:m}):null,Object(d.jsx)("button",{type:"submit",className:"btn btn-primary float-right",onSubmit:f,children:"Submit"})]})})})]})})};var H=function(e){var t=e.exact,n=e.path,a=e.children,s=Object(r.useContext)(p).currentUser;return console.debug("PrivateRoute","exact=",t,"path=",n,"currentUser=",s),s?Object(d.jsx)(h.b,{exact:t,path:n,children:a}):Object(d.jsx)(h.a,{to:"/login"})};var M=function(e){var t=e.login,n=e.signup;return console.debug("Routes","login=".concat(typeof t),"register=".concat(typeof register)),Object(d.jsx)("div",{className:"pt-5",children:Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{exact:!0,path:"/",children:Object(d.jsx)(O,{})}),Object(d.jsx)(h.b,{exact:!0,path:"/login",children:Object(d.jsx)(I,{login:t})}),Object(d.jsx)(h.b,{exact:!0,path:"/signup",children:Object(d.jsx)(B,{signup:n})}),Object(d.jsx)(H,{exact:!0,path:"/companies",children:Object(d.jsx)(U,{})}),Object(d.jsx)(H,{exact:!0,path:"/jobs",children:Object(d.jsx)(A,{})}),Object(d.jsx)(H,{exact:!0,path:"/companies/:handle",children:Object(d.jsx)(q,{})}),Object(d.jsx)(H,{path:"/profile",children:Object(d.jsx)(T,{})}),Object(d.jsx)(h.a,{to:"/"})]})})},R=n(146),z=n.n(R);var W=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(new Set([])),c=Object(j.a)(s,2),i=c[0],h=c[1],O=Object(r.useState)(null),x=Object(j.a)(O,2),v=x[0],g=x[1],N=m("jobly-token"),y=Object(j.a)(N,2),w=y[0],C=y[1];function U(){return(U=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.signup(t);case 3:return n=e.sent,C(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.log("signup failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function J(){return(J=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.login(t);case 3:return n=e.sent,C(n),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function E(e){return i.has(e)}return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=15;break}return e.prev=1,t=z.a.decode(w),n=t.username,k.token=w,e.next=6,k.getCurrentUser(n);case 6:r=e.sent,g(r),h(new Set(r.applications)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),g(null);case 15:a(!0);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}console.debug("App useEffect loadUserInfo","token=",w),a(!1),function(){e.apply(this,arguments)}()}),[w]),n?Object(d.jsx)(b.a,{children:Object(d.jsx)(p.Provider,{value:{currentUser:v,setCurrentUser:g,hasAppliedToJob:E,applyToJob:function(e){E(e)||(k.applyToJob(v.username,e),h(new Set([].concat(Object(o.a)(i),[e]))))}},children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(f,{logout:function(){g(null),C(null)}}),Object(d.jsx)(M,{login:function(e){return J.apply(this,arguments)},signup:function(e){return U.apply(this,arguments)}})]})})}):Object(d.jsx)(S,{})};c.a.render(Object(d.jsx)(W,{}),document.getElementById("root"))}},[[293,1,2]]]);
//# sourceMappingURL=main.99d8235b.chunk.js.map